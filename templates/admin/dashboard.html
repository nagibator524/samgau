{% extends "admin/base.html" %}

{% block title %}Панель управления{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">
        <i class="fas fa-tachometer-alt me-2" style="color: var(--primary-gold);"></i>
        Панель управления
    </h2>
    <div class="text-muted">
        <i class="fas fa-calendar me-1"></i>
        <span id="current-date"></span>
    </div>
</div>

<!-- Статистика -->
<div class="row mb-4">
    <div class="col-md-6 col-lg-3 mb-3">
        <div class="stats-card">
            <i class="fas fa-newspaper"></i>
            <h3 class="mb-1">{{ news_count }}</h3>
            <p class="mb-0">Новостей</p>
        </div>
    </div>
    <div class="col-md-6 col-lg-3 mb-3">
        <div class="stats-card">
            <i class="fas fa-users"></i>
            <h3 class="mb-1">{{ team_count }}</h3>
            <p class="mb-0">Членов команды</p>
        </div>
    </div>
    <div class="col-md-6 col-lg-3 mb-3">
        <div class="stats-card">
            <i class="fas fa-eye"></i>
            <h3 class="mb-1">∞</h3>
            <p class="mb-0">Просмотров</p>
        </div>
    </div>
    <div class="col-md-6 col-lg-3 mb-3">
        <div class="stats-card">
            <i class="fas fa-heart"></i>
            <h3 class="mb-1">100%</h3>
            <p class="mb-0">Поддержка</p>
        </div>
    </div>
</div>

<!-- Быстрые действия -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-bolt me-2"></i>
                    Быстрые действия
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <a href="{{ url_for('create_news') }}" class="btn btn-primary w-100">
                            <i class="fas fa-plus me-2"></i>
                            Добавить новость
                        </a>
                    </div>
                    <div class="col-md-3 mb-3">
                        <a href="{{ url_for('create_team_member') }}" class="btn btn-info w-100">
                            <i class="fas fa-user-plus me-2"></i>
                            Добавить команду
                        </a>
                    </div>
                    <div class="col-md-3 mb-3">
                        <a href="{{ url_for('admin_about') }}" class="btn btn-warning w-100">
                            <i class="fas fa-edit me-2"></i>
                            Редактировать "О нас"
                        </a>
                    </div>
                    <div class="col-md-3 mb-3">
                        <a href="{{ url_for('index') }}" target="_blank" class="btn btn-success w-100">
                            <i class="fas fa-external-link-alt me-2"></i>
                            Просмотр сайта
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Последние действия -->
<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-newspaper me-2"></i>
                    Последние новости
                </h5>
            </div>
            <div class="card-body">
                {% if news_count > 0 %}
                <div class="list-group list-group-flush">
                    {% for i in range(3) %}
                    <div class="list-group-item d-flex justify-content-between align-items-center border-0 px-0">
                        <div>
                            <h6 class="mb-1">Новость #{{ i + 1 }}</h6>
                            <small class="text-muted">
                                <i class="fas fa-calendar me-1"></i>
                                Недавно
                            </small>
                        </div>
                        <span class="badge bg-primary rounded-pill">
                            <i class="fas fa-eye me-1"></i>
                            {{ (i + 1) * 10 }}
                        </span>
                    </div>
                    {% endfor %}
                </div>
                <div class="text-center mt-3">
                    <a href="{{ url_for('admin_news') }}" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-arrow-right me-1"></i>
                        Все новости
                    </a>
                </div>
                {% else %}
                <div class="text-center py-4">
                    <i class="fas fa-newspaper mb-3" style="font-size: 3rem; color: var(--primary-gold);"></i>
                    <h6>Новости пока не добавлены</h6>
                    <p class="text-muted">Добавьте первую новость для начала работы</p>
                    <a href="{{ url_for('create_news') }}" class="btn btn-primary btn-sm">
                        <i class="fas fa-plus me-1"></i>
                        Добавить новость
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-users me-2"></i>
                    Команда
                </h5>
            </div>
            <div class="card-body">
                {% if team_count > 0 %}
                <div class="list-group list-group-flush">
                    {% for i in range(3) %}
                    <div class="list-group-item d-flex justify-content-between align-items-center border-0 px-0">
                        <div>
                            <h6 class="mb-1">Член команды #{{ i + 1 }}</h6>
                            <small class="text-muted">
                                <i class="fas fa-user-tag me-1"></i>
                                Позиция {{ i + 1 }}
                            </small>
                        </div>
                        <span class="badge bg-info rounded-pill">
                            <i class="fas fa-star me-1"></i>
                            Активен
                        </span>
                    </div>
                    {% endfor %}
                </div>
                <div class="text-center mt-3">
                    <a href="{{ url_for('admin_team') }}" class="btn btn-outline-info btn-sm">
                        <i class="fas fa-arrow-right me-1"></i>
                        Вся команда
                    </a>
                </div>
                {% else %}
                <div class="text-center py-4">
                    <i class="fas fa-users mb-3" style="font-size: 3rem; color: var(--primary-gold);"></i>
                    <h6>Команда пока не добавлена</h6>
                    <p class="text-muted">Добавьте членов команды для начала работы</p>
                    <a href="{{ url_for('create_team_member') }}" class="btn btn-info btn-sm">
                        <i class="fas fa-user-plus me-1"></i>
                        Добавить команду
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Информация о системе -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-info-circle me-2"></i>
                    Информация о системе
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Техническая информация</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-code me-2"></i>Flask Framework</li>
                            <li><i class="fas fa-database me-2"></i>SQLite Database</li>
                            <li><i class="fas fa-palette me-2"></i>Bootstrap 5</li>
                            <li><i class="fas fa-icons me-2"></i>Font Awesome</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Функции сайта</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-newspaper me-2"></i>Управление новостями</li>
                            <li><i class="fas fa-users me-2"></i>Управление командой</li>
                            <li><i class="fas fa-edit me-2"></i>Редактирование контента</li>
                            <li><i class="fas fa-shield-alt me-2"></i>Админ панель</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Display current date and time
function updateDateTime() {
    const now = new Date();
    const options = { 
        day: '2-digit', 
        month: '2-digit', 
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
    };
    document.getElementById('current-date').textContent = now.toLocaleDateString('ru-RU', options);
}

// Update date on page load
updateDateTime();
// Update every minute
setInterval(updateDateTime, 60000);
</script>
{% endblock %}
