{% extends "base.html" %}

{% block title %}Новости - Предвыборная кампания{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="news-hero py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-12">
                <h1 class="news-hero-title">
                    <span class="text-dark">Новости</span>
                    <span class="text-gold">кампании</span>
                </h1>
                <p class="news-hero-subtitle">
                    Будьте в курсе всех событий нашей предвыборной кампании. 
                    Здесь вы найдете последние новости, анонсы мероприятий и важные обновления.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Search and Filter Section -->
<section class="search-filter-section py-4 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="search-filter-card">
                    <div class="row align-items-center">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <div class="search-box">
                                <div class="input-group">
                                    <span class="input-group-text bg-white border-end-0">
                                        <i class="fas fa-search text-muted"></i>
                                    </span>
                                    <input type="text" class="form-control border-start-0" id="newsSearch" placeholder="Поиск новостей...">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="filter-options">
                                <select class="form-select" id="newsFilter">
                                    <option value="all">Все новости</option>
                                    <option value="events">Мероприятия</option>
                                    <option value="announcements">Объявления</option>
                                    <option value="updates">Обновления</option>
                                    <option value="achievements">Достижения</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- News Content Section -->
<section class="news-content-section py-5">
    <div class="container">
        {% if news %}
        <div class="row" id="newsContainer">
            {% for article in news %}
            <div class="col-lg-4 col-md-6 mb-4 news-item" data-category="all">
                <div class="news-article-card">
                    <div class="article-image">
                        {% if article.image_url %}
                        <img src="{{ article.image_url }}" alt="{{ article.title }}" class="img-fluid">
                        {% else %}
                        <div class="article-placeholder">
                            <i class="fas fa-newspaper"></i>
                        </div>
                        {% endif %}
                        <div class="article-overlay">
                            <div class="article-actions">
                                <button class="btn btn-sm btn-light" onclick="shareArticle('{{ article.title }}', '{{ article.content[:100] }}...')">
                                    <i class="fas fa-share-alt"></i>
                                </button>
                                <button class="btn btn-sm btn-light" onclick="bookmarkArticle({{ article.id }})">
                                    <i class="fas fa-bookmark"></i>
                                </button>
                            </div>
                        </div>
                        <div class="article-date">
                            <span class="date-day">{{ article.created_at.strftime('%d') }}</span>
                            <span class="date-month">{{ article.created_at.strftime('%b') }}</span>
                        </div>
                    </div>
                    <div class="article-content">
                        <div class="article-meta">
                            <span class="article-category">
                                <i class="fas fa-tag me-1"></i>
                                Новости
                            </span>
                            <span class="article-time">
                                <i class="fas fa-clock me-1"></i>
                                {{ article.created_at.strftime('%H:%M') }}
                            </span>
                        </div>
                        <h4 class="article-title">{{ article.title }}</h4>
                        <p class="article-excerpt">
                            {{ article.content[:150] }}{% if article.content|length > 150 %}...{% endif %}
                        </p>
                        <div class="article-footer">
                            <a href="{{ url_for('news_detail', news_id=article.id) }}" class="btn btn-outline-primary btn-sm">
                                Читать далее
                                <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                            <div class="article-stats">
                                <span class="stat-item">
                                    <i class="fas fa-eye me-1"></i>
                                    {{ (loop.index * 15) + 25 }}
                                </span>
                                <span class="stat-item">
                                    <i class="fas fa-heart me-1"></i>
                                    {{ (loop.index * 3) + 8 }}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        <div class="row">
            <div class="col-12">
                <nav aria-label="Навигация по новостям">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                                <i class="fas fa-chevron-left"></i>
                            </a>
                        </li>
                        <li class="page-item active">
                            <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">2</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">3</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">
                                <i class="fas fa-chevron-right"></i>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

        {% else %}
        <!-- Empty State -->
        <div class="row">
            <div class="col-12 text-center">
                <div class="empty-news-state">
                    <i class="fas fa-newspaper mb-4" style="font-size: 5rem; color: var(--primary-gold);"></i>
                    <h3>Новости скоро появятся</h3>
                    <p class="text-muted mb-4">
                        Мы активно работаем над созданием интересного контента. 
                        Скоро здесь появятся первые новости о нашей кампании.
                    </p>
                    <div class="news-placeholder-cards">
                        <div class="row justify-content-center">
                            <div class="col-lg-4 col-md-6 mb-3">
                                <div class="placeholder-news-card">
                                    <div class="placeholder-image"></div>
                                    <div class="placeholder-content">
                                        <div class="placeholder-title"></div>
                                        <div class="placeholder-text"></div>
                                        <div class="placeholder-text short"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 mb-3">
                                <div class="placeholder-news-card">
                                    <div class="placeholder-image"></div>
                                    <div class="placeholder-content">
                                        <div class="placeholder-title"></div>
                                        <div class="placeholder-text"></div>
                                        <div class="placeholder-text short"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 mb-3">
                                <div class="placeholder-news-card">
                                    <div class="placeholder-image"></div>
                                    <div class="placeholder-content">
                                        <div class="placeholder-title"></div>
                                        <div class="placeholder-text"></div>
                                        <div class="placeholder-text short"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <div class="newsletter-card">
                    <h3 class="mb-3">Подпишитесь на новости</h3>
                    <p class="text-muted mb-4">
                        Получайте последние новости и обновления прямо на вашу почту. 
                        Будьте первыми, кто узнает о важных событиях!
                    </p>
                    <form class="newsletter-form">
                        <div class="row justify-content-center">
                            <div class="col-md-8 col-lg-6">
                                <div class="input-group">
                                    <input type="email" class="form-control" placeholder="Ваш email адрес" required>
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Подписаться
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="news-cta-section py-5 bg-gold text-white">
    <div class="container">
        <div class="row text-center">
            <div class="col-12">
                <h3 class="mb-4">Остались вопросы?</h3>
                <p class="lead mb-4">
                    Свяжитесь с нами, если у вас есть вопросы о нашей кампании или вы хотите получить дополнительную информацию.
                </p>
                <div class="cta-buttons">
                    <a href="{{ url_for('about') }}" class="btn btn-white btn-lg me-3">
                        <i class="fas fa-info-circle me-2"></i>
                        О нас
                    </a>
                    <a href="{{ url_for('team') }}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-users me-2"></i>
                        Наша команда
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>


{% endblock %}

{% block extra_css %}
<style>
/* News Hero Section */
.news-hero {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

.news-hero-title {
    font-size: 3.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    line-height: 1.2;
}

.news-hero-subtitle {
    font-size: 1.25rem;
    color: #666;
    margin-bottom: 2rem;
    line-height: 1.6;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}

/* Search and Filter Section */
.search-filter-card {
    background: white;
    padding: 1.5rem;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.search-box .input-group-text {
    border-color: #dee2e6;
}

.search-box .form-control {
    border-color: #dee2e6;
}

.search-box .form-control:focus {
    box-shadow: none;
    border-color: var(--primary-gold);
}

.filter-options .form-select {
    border-color: #dee2e6;
}

.filter-options .form-select:focus {
    box-shadow: none;
    border-color: var(--primary-gold);
}

/* News Article Cards */
.news-article-card {
    background: white;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 100%;
}

.news-article-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.article-image {
    position: relative;
    height: 200px;
    overflow: hidden;
}

.article-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.news-article-card:hover .article-image img {
    transform: scale(1.05);
}

.article-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
    display: flex;
    align-items: center;
    justify-content: center;
}

.article-placeholder i {
    font-size: 3rem;
    color: #adb5bd;
}

.article-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.news-article-card:hover .article-overlay {
    opacity: 1;
}

.article-actions {
    display: flex;
    gap: 0.5rem;
}

.article-actions .btn {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
}

.article-date {
    position: absolute;
    top: 15px;
    right: 15px;
    background: var(--primary-gold);
    color: white;
    padding: 0.5rem;
    border-radius: 8px;
    text-align: center;
    min-width: 50px;
}

.date-day {
    display: block;
    font-size: 1.2rem;
    font-weight: 700;
    line-height: 1;
}

.date-month {
    display: block;
    font-size: 0.8rem;
    text-transform: uppercase;
}

.article-content {
    padding: 1.5rem;
}

.article-meta {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1rem;
    font-size: 0.85rem;
}

.article-category, .article-time {
    color: #666;
}

.article-title {
    color: var(--dark-color);
    margin-bottom: 1rem;
    font-weight: 600;
    font-size: 1.1rem;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.article-excerpt {
    color: #666;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.article-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.article-stats {
    display: flex;
    gap: 1rem;
}

.stat-item {
    color: #666;
    font-size: 0.85rem;
}

/* Empty News State */
.empty-news-state {
    padding: 3rem 1rem;
}

.empty-news-state h3 {
    color: var(--dark-color);
    margin-bottom: 1rem;
}

.placeholder-news-card {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.placeholder-image {
    height: 150px;
    background: #f8f9fa;
}

.placeholder-content {
    padding: 1rem;
}

.placeholder-title {
    height: 20px;
    background: #f8f9fa;
    border-radius: 4px;
    margin-bottom: 0.5rem;
}

.placeholder-text {
    height: 12px;
    background: #f8f9fa;
    border-radius: 4px;
    margin-bottom: 0.5rem;
}

.placeholder-text.short {
    width: 60%;
}

/* Newsletter Section */
.newsletter-card {
    background: white;
    padding: 2.5rem;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.newsletter-card h3 {
    color: var(--dark-color);
    font-weight: 600;
}

.newsletter-form .input-group {
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    border-radius: 25px;
    overflow: hidden;
}

.newsletter-form .form-control {
    border: none;
    padding: 0.75rem 1.5rem;
}

.newsletter-form .form-control:focus {
    box-shadow: none;
}

.newsletter-form .btn {
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 0 25px 25px 0;
}

/* CTA Section */
.news-cta-section {
    background: linear-gradient(135deg, var(--primary-gold), #ffd700);
}

.btn-white {
    background: white;
    color: var(--dark-color);
    border: 2px solid white;
}

.btn-white:hover {
    background: transparent;
    color: white;
}

.btn-outline-light {
    border: 2px solid white;
    color: white;
}

.btn-outline-light:hover {
    background: white;
    color: var(--dark-color);
}

/* Pagination */
.pagination .page-link {
    color: var(--dark-color);
    border-color: #dee2e6;
}

.pagination .page-item.active .page-link {
    background-color: var(--primary-gold);
    border-color: var(--primary-gold);
}

.pagination .page-link:hover {
    color: var(--primary-gold);
    border-color: var(--primary-gold);
}

/* Responsive Design */
@media (max-width: 768px) {
    .news-hero-title {
        font-size: 2.5rem;
    }
    
    .news-hero-subtitle {
        font-size: 1.1rem;
    }
    
    .article-footer {
        flex-direction: column;
        gap: 1rem;
        align-items: stretch;
    }
    
    .cta-buttons .btn {
        display: block;
        width: 100%;
        margin-bottom: 1rem;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
// Search functionality
document.getElementById('newsSearch').addEventListener('input', function() {
    const searchTerm = this.value.toLowerCase();
    const newsItems = document.querySelectorAll('.news-item');
    
    newsItems.forEach(item => {
        const title = item.querySelector('.article-title').textContent.toLowerCase();
        const excerpt = item.querySelector('.article-excerpt').textContent.toLowerCase();
        
        if (title.includes(searchTerm) || excerpt.includes(searchTerm)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
});

// Filter functionality
document.getElementById('newsFilter').addEventListener('change', function() {
    const filterValue = this.value;
    const newsItems = document.querySelectorAll('.news-item');
    
    newsItems.forEach(item => {
        if (filterValue === 'all' || item.dataset.category === filterValue) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
});

// Share article functionality
function shareArticle(title, content) {
    if (navigator.share) {
        navigator.share({
            title: title,
            text: content,
            url: window.location.href
        });
    } else {
        // Fallback for browsers that don't support Web Share API
        const text = `${title}\n\n${content}\n\n${window.location.href}`;
        navigator.clipboard.writeText(text).then(() => {
            alert('Ссылка скопирована в буфер обмена!');
        });
    }
}

// Bookmark article functionality
function bookmarkArticle(articleId) {
    // This would typically save to localStorage or send to server
    const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
    if (!bookmarks.includes(articleId)) {
        bookmarks.push(articleId);
        localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
        alert('Новость добавлена в закладки!');
    } else {
        const index = bookmarks.indexOf(articleId);
        bookmarks.splice(index, 1);
        localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
        alert('Новость удалена из закладок!');
    }
}



// Newsletter form submission
document.querySelector('.newsletter-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = this.querySelector('input[type="email"]').value;
    
    // This would typically send to server
    alert(`Спасибо! Вы подписались на новости с email: ${email}`);
    this.reset();
});
</script>
{% endblock %}
